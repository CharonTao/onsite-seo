require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({inspector:[function(a,b){b.exports=a("pxJ2on")},{}],pxJ2on:[function(a,b){var c=a("lightdom"),d={},e=function(a){return a?a.replace(/^\s+/,"").replace(/\s+$/,""):a},f=function(a){for(var b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:function(a){return a.nodeName.match(/h[1-9]/i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},!1);c.nextNode();){var d=c.currentNode;b.push({level:d.nodeName.toLowerCase(),text:e($(d).text())})}return b};d.inspect=function(){var a={html:{},meta:{},links:{},headers:{},text:{},resources:{},media:{}};return a.hasJQuery="undefined"!=typeof $,a.hasJQuery&&(a.html.lang=e($("html[lang]").attr("lang")),a.html.ids=$.map($("[id]"),function(a){return $(a).attr("id")}),a.html.lightDOM=c.build(document.body),a.meta.lang=e($("meta[http-equiv=content-language]").attr("content")),a.meta.title=e($("title").text()),a.meta.description=e($("meta[name=description]").attr("content")),a.meta.keywords=(""+e($("meta[name=keywords]").attr("content"))).split(/\s*,\s*/).filter(function(a){return a}).join(", "),a.links.all=$.map($("a[href]"),function(a){return{href:$(a).attr("href"),title:$(a).attr("title"),text:e($(a).text())}}),a.headers.all=f(document.body),a.text.text=c.text(a.html.lightDOM).replace(/\s{2,}/g," ").replace(/(^\s+|\s+$)/g,""),a.text.textSize=a.text.text.length,a.text.strong=$.map($("b"),function(a){return $(a).text()}).concat($.map($("strong"),function(a){return $(a).text()})),a.text.emphasis=$.map($("i"),function(a){return $(a).text()}).concat($.map($("em"),function(a){return $(a).text()})),a.text.htmlSize=$("html").html().replace(/\s+/g," ").length,a.text.textRatio=a.text.textSize/a.text.htmlSize,a.resources.externalScripts=$.map($("script[src]"),function(a){return $(a).attr("src")?!1:$(a).attr("src")}),a.resources.inlineStyles=$("style").length,a.resources.styles=$.map($("link[rel=stylesheet]"),function(a){return $(a).attr("href")}),a.media.images=$.map($("img[src]"),function(a){return{src:$(a).attr("src"),alt:$(a).attr("alt"),width:$(a).attr("width"),height:$(a).attr("height")}})),a},b.exports=d},{lightdom:"c1XhJL"}],c1XhJL:[function(a,b){var c,d,e,f={},g={},h="h1,h2,h3,h4,p,ul,ol,li,img:title:src:width:height,blockquote,a:href:title,b,strong,i,em,br",i="script,noscript,style,iframe";c=function(a){var b=a.split(":");return b.length>1&&(g[b[0]]=b.slice(1)),b[0]};var d=h.split(",").map(c),e=i.split(",");f.build=function(a){if(!a)return[];if(a.nodeType===a.TEXT_NODE)return a.data.match(/^\s+$/)?[]:[{type:"t",data:a.data}];var b,c=a.nodeName.toLowerCase(),h=[];if(e.indexOf(c)>=0)return[];if(d.indexOf(c)>=0&&(b={type:"e",name:c,children:[],attrs:{}},g[c]))for(var i=0,j=g[c].length;j>i;i++){var k=g[c][i];b.attrs[k]=a.getAttribute(k)}for(var i=0,j=a.childNodes.length;j>i;i++){var l=f.build(a.childNodes[i]);h=h.concat(l)}return b?(b.children=b.children.concat(h),[b]):h},f.walk=function(a,b){if(a)if("object"==typeof a&&"length"in a)for(var c=0,d=a.length;d>c;c++)f.walk(a[c],b);else{var e=b(a);if(e!==!1&&a.children)for(var c=0,d=a.children.length;d>c;c++)f.walk(a.children[c],b)}},f.text=function(a){var b=[];return f.walk(a,function(a){return"t"===a.type&&b.push(a.data),!0}),b.join(" ")},f.html=function(a){var b="br,img".split(":");if("object"==typeof a&&"length"in a){for(var c="",d=0,e=a.length;e>d;d++)c+=f.html(a[d]);return c}if("t"===a.type)return a.data;if("e"===a.type){var c="<"+a.name;for(var g in a.attrs)a.attrs.hasOwnProperty(g)&&a.attrs[g]&&(c+=" "+g+'="'+a.attrs[g]+'"');return b.indexOf(a.name)>=0?c+" />":c+">"+f.html(a.children)+"</"+a.name+">"}return""},b.exports=f},{}],lightdom:[function(a,b){b.exports=a("c1XhJL")},{}],SkZC52:[function(a,b){var c={fns:[]};c.proxyFn=function(a){return function(b,c){var d=a(b,c);return""+d}},c.addProperty=function(a){var b={title:"string",fn:"function"},d={description:"",group:"default",scope:"page"},e={};for(var f in b){var g=typeof a[f];if(b.hasOwnProperty(f)&&g!==b[f])return void console.log("undefined"===g?"Required property "+f+" is missing of "+a.title:"Type "+g+" should be type "+b[f]+" of property "+f+" in "+a.title);e[f]=a[f]}for(var f in d)d.hasOwnProperty(f)&&"undefined"==typeof a[f]?e[f]=d[f]:"fn"!==f&&(e[f]=a[f]);e.fn=c.proxyFn(a.fn),c.fns.push(e)},c.addProperties=function(a){for(var b in a)c.addProperty(a[b])},c.getProperties=function(){return c.fns},c.getGroups=function(){var a=[],b=c.getProperties();for(var d in b){var e=b[d].group;a.indexOf(e)<0&&a.push(e)}return a},c.getPropertiesByGroup=function(a){var b=[],d=c.getProperties();for(var e in d)d[e].group===a&&b.push(d[e]);return b},c.addProperties(a("./properties/meta")),c.addProperties(a("./properties/keyword")),c.addProperties(a("./properties/header")),c.addProperties(a("./properties/text")),c.addProperties(a("./properties/link")),c.addProperties(a("./properties/image")),b.exports=c},{"./properties/header":7,"./properties/image":8,"./properties/keyword":9,"./properties/link":10,"./properties/meta":11,"./properties/text":12}],properties:[function(a,b){b.exports=a("SkZC52")},{}],7:[function(a,b){var c=[{title:"H1",description:"Page should have H1 header",fn:function(a){var b=a.headers.all.filter(function(a){return"h1"===a.level}).map(function(a){return a.text});return b.join(", ")}},{title:"Header Order",description:"Shows the header orders",fn:function(a){var b=a.headers.all.map(function(a){return a.level});return b.join(", ")}},{title:"H1 Header Count",description:"Shows header level counts",fn:function(a){return a.headers.all.filter(function(a){return"h1"===a.level}).length}},{title:"H2 Header Count",description:"Shows header level counts",fn:function(a){return a.headers.all.filter(function(a){return"h2"===a.level}).length}},{title:"H3 Header Count",description:"Shows header level counts",fn:function(a){return a.headers.all.filter(function(a){return"h3"===a.level}).length}},{title:"H4 Header Count",description:"Shows header level counts",fn:function(a){return a.headers.all.filter(function(a){return"h4"===a.level}).length}},{title:"Headers Text",description:"Shows the header orders",fn:function(a){var b=a.headers.all.map(function(a){return"("+a.level+") "+a.text});return b.join(", ")}}];for(var d in c)c[d].group="Header",c[d].scope="page";b.exports=c},{}],8:[function(a,b){var c=[{title:"Image count",description:"Shows total image count",fn:function(a){return a.media.images.length}},{title:"Image Sources",description:"Shows image sources",fn:function(a){return a.media.images.map(function(a){return a.src}).join(", ")}},{title:"Image Alternative Text",description:"Shows image alternative text",fn:function(a){return a.media.images.filter(function(a){return a.alt}).map(function(a){return a.alt}).join(", ")}}];for(var d in c)c[d].group="Link",c[d].scope="page";b.exports=c},{}],9:[function(a,b){var c=a("../lightdom"),d=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b].split(/\s+/);c.length>1&&(a=a.concat(c))}return a},e=function(a){var b="";return a.sort(function(a,b){return b.length-a.length}).filter(function(a){var c=a.toLowerCase()!==b.toLowerCase();return b=a,c})},f=function(a,b){var c={};a=e(a);for(var d in a){var f=a[d];c[f]=0,b.replace(new RegExp(f,"gi"),function(){return c[f]++,""})}return c},g=function(a){var b=0,c=0,d=[];for(var e in a)a.hasOwnProperty(e)&&(c++,b+=a[e],d.push(""+a[e]+"x "+e));return""+b+"x/"+c+": "+d.join(", ")},h=[{title:"Keywords",description:"Page might have some keywords defined",fn:function(a){return a.meta.keywords?a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}).join(", "):""}},{title:"Keywords in Description",description:"Single keyword counting in meta description",fn:function(a){if(!a.meta.keywords||!a.meta.description)return"";var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),c=a.meta.description;return g(f(b,c))}},{title:"Keywords in Headers",description:"Single keyword counting in headers",fn:function(a){if(!a.meta.keywords||!a.headers.all)return"";var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),c=a.headers.all.map(function(a){return a.text}).join(" ");return g(f(b,c))}},{title:"Keywords in Link Text",description:"Counts keywords in link texts",weight:.5,fn:function(a){if(!a.meta.keywords||!a.links.all)return"";var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),c=a.links.all.map(function(a){return a.text}).join(" ");return g(f(b,c))}},{title:"Keywords in Text",description:"Single keyword counting in text",fn:function(a){if(!a.meta.keywords)return"";var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),e=[],h="h1,h2,h3,h4,h5,h6,a,i,em,strong,b".split(",");return c.walk(a.html.lightDOM,function(a){return"t"===a.type&&e.push(a.data),"e"!==a.type||h.indexOf(a.name)<0}),g(f(d(b),e.join(" ")))}},{title:"Keywords in emphasis Text",description:"Single keyword counting in text",weight:.2,fn:function(a){if(!a.meta.keywords)return"";var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),c=a.text.strong.concat(a.text.emphasis).join(" ");return g(f(d(b),c))}},{title:"Keyword Density",description:"Keyword to words ratio",weight:.2,fn:function(a){if(!a.meta.keywords)return 0;var b=a.meta.keywords.split(/\s*,\s*/).filter(function(a){return a}),c=a.text.text,d=f(b,c),e=0;for(var g in d)d.hasOwnProperty(g)&&(e+=d[g]);return(e/c.split(/\s+/).length).toFixed(4)}}];for(var i in h)h[i].group="Keyword",h[i].scope="page";b.exports=h},{"../lightdom":"c1XhJL"}],10:[function(a,b){var c=[{title:"Link count",description:"Shows the total link count",fn:function(a){return a.links.all.length}},{title:"Link Refs",description:"Shows the link references",fn:function(a){return a.links.all.map(function(a){return a.href}).join(", ")}},{title:"Link Texts",description:"Shows the link text",fn:function(a){return a.links.all.filter(function(a){return a.text}).map(function(a){return a.text}).join(", ")}},{title:"Link Titles",description:"Shows the link titles",fn:function(a){return a.links.all.filter(function(a){return a.title}).map(function(a){return a.text}).join(", ")}}];for(var d in c)c[d].group="Link",c[d].scope="page";b.exports=c},{}],11:[function(a,b){var c=[{title:"Title",description:"Page should have title tag",fn:function(a){return a.meta.title}},{title:"Description",description:"Page should have description",fn:function(a){return a.meta.description}},{title:"Language",description:"Page should have a language definition",fn:function(a){var b=[];return a.html.lang&&b.push(a.html.lang),a.meta.lang&&b.push(a.meta.lang),b.join(", ")}},{title:"IDs",description:"ID for references",fn:function(a){var b=a.html.ids||[];return b.join(", ")}}];for(var d in c)c[d].group="Meta",c[d].scope="page";b.exports=c},{}],12:[function(a,b){var c=a("lightdom"),d=[{title:"Word Count",description:"Number of single words",fn:function(a){return a.text.text.split(/\s+/).length}},{title:"Paragraph Count",description:"Number of paragraph",fn:function(a){var b=0;return c.walk(a.html.lightDOM,function(a){"e"===a.type&&"p"===a.name&&b++}),b}}];for(var e in d)d[e].group="Text",d[e].scope="page";b.exports=d},{lightdom:"c1XhJL"}],ratings:[function(a,b){b.exports=a("7Puv7F")},{}],"7Puv7F":[function(a,b){var c={fn:[]};c.getPageSummary=function(a){var b=a.headers.all.filter(function(a){return"h1"===a.level}),c=[];for(var d in a.headers.all)c.push(a.headers.all[d].level);var e=a.headers.all.filter(function(a){return"h1"===a.level}).length,f=a.headers.all.filter(function(a){return"h2"===a.level}).length,g=a.headers.all.filter(function(a){return"h3"===a.level}).length,h=[{title:"Title",value:a.meta.title},{title:"Description",value:a.meta.description},{title:"Keywords",value:a.meta.keywords},{title:"Language",value:[a.html.lang,a.meta.lang].join(", ")},{title:"Header Order",value:c.join(", ")},{title:"H1",value:e?b[0].text:""},{title:"H1 Counts",value:e},{title:"H2 Counts",value:f},{title:"H3 Counts",value:g}];return h},c.getPoints=function(a,b,c){return c=c||5,Math.max(1,Math.ceil(c*(Math.min(b,a)/b)))},c.proxyRateFn=function(a,b){return function(c,d){var e,f=a(c,d);return"object"!=typeof f?e={score:f,value:f,suggestions:[]}:("undefined"==typeof f.score&&(f.score=0),"undefined"==typeof f.suggestions&&(f.suggestions=[]),"undefined"==typeof f.value&&(f.value=f.score),e=f),e.score=Math.max(0,Math.min(e.score,1)),e.weightedScore=e.score*b.weight,e}},c.addRating=function(a){var b={title:"string",rateFn:"function"},d={description:"",weight:1,group:"default",scope:"page"},e={};for(var f in b){var g=typeof a[f];if(b.hasOwnProperty(f)&&g!==b[f])return void console.log("undefined"===g?"Required property "+f+" is missing of "+a.title:"Type "+g+" should be type "+b[f]+" of property "+f+" in "+a.title);e[f]=a[f]}for(var f in d)d.hasOwnProperty(f)&&"undefined"==typeof a[f]?e[f]=d[f]:"rateFn"!==f&&(e[f]=a[f]);e.rateFn=c.proxyRateFn(a.rateFn,e),c.fn.push(e)},c.addRatings=function(a){for(var b in a)c.addRating(a[b])},c.getRatings=function(){return c.fn},c.getGroups=function(){var a=[],b=c.getRatings();for(var d in b){var e=b[d].group;a.indexOf(e)<0&&a.push(e)}return a},c.getRatingsByGroup=function(a){var b=[],d=c.getRatings();for(var e in d)d[e].group===a&&b.push(d[e]);return b},c.getWeightSumOfRatings=function(a){var b=0;for(var c in a)b+=a[c].weight;return b},c.getWeightSum=function(){return c.getWeightSumOfRatings(c.getRatings())},c.addRatings(a("./ratings/keyword")),c.addRatings(a("./ratings/meta")),c.addRatings(a("./ratings/default")),c.addRatings(a("./ratings/link")),b.exports=c},{"./ratings/default":15,"./ratings/keyword":16,"./ratings/link":17,"./ratings/meta":18}],15:[function(a,b){var c=[{title:"Title and H1 comparison",description:"Title should be different to H1",group:"Headers",rateFn:function(a){var b,c=0,d=a.meta.title.toLowerCase().split(/\s+/).sort(),e=[],f=a.headers.all.filter(function(a){return"h1"===a.level});f.length&&(e=f[0].text.toLowerCase().split(/\s+/).sort());for(var g in d)e.indexOf(d[g])<0&&c++;for(var g in e)d.indexOf(e[g])<0&&c++;return b=c/(d.length+e.length)}},{title:"Headers",description:"Only one H1 per page and lower level should have higher level",group:"Headers",rateFn:function(a){var b=1,c=4,d=.1,e=.3,f=.5,g=a.headers.all,h=[],i=[];for(var j in g){var k=parseInt(g[j].level.replace(/\D+/,""));if(!(0>=k)){if(k>h.length)for(;k>h.length;)k>h.length+1&&(i.push("Header level missmatch at level "+(h.length+1)+" for Header "+g[j].level+": "+g[j].text),b-=e),h.push(0);else if(k<h.length)for(;k<h.length;)h[h.length-1]<c&&(i.push("Header count of level "+h.length+" should be at least "+c+" (Header: "+g[j].text+")"),b-=d),h.pop();h[h.length-1]++}}if(h.length)for(;h.length>0;){var l=h[h.length-1];1===h.length&&1!==l?(i.push("Only one H1 should exists. Found "+h[0]),b-=f):h.length>1&&c>l&&(i.push("Header count of level "+h.length+" is "+l+" but should be at least "+c),b-=d),h.pop()}else b=0;return{score:Math.max(0,b),suggestions:i}}},{title:"Text Ratio",description:"Text to Stite markup should be larger than 50%",weight:.5,rateFn:function(a){var b=.2,c=.6,d=(a.text.textRatio-b)*(c-b),e={score:d,value:a.text.textRatio,suggestions:[]};if(e.score<=5){var f=Math.ceil(100*a.text.textRatio);e.suggestions.push("Your text to html markup ratio is very low with "+f+"%")}return e}}];for(var d in c)c[d].group=c[d].group||"Text",c[d].scope="page";b.exports=c},{}],16:[function(a,b){var c=[{title:"Keyword Count",description:"At least 5 keywords",weight:.4,rateFn:function(a){var b=.05,c=.1,d=1;if(a.meta.keywords){var e=a.meta.keywords.split(/\s*,\s*/),f=[],d=5;for(var g in e)e[g].length<4?(f.push("Keyword "+e[g]+" is too short (less than 4 chars)"),d-=b):e[g].length>20&&(f.push("Keyword "+e[g]+" is too long (more than 20 chars)"),d-=c);return{score:d,value:e.length,suggestions:f}}return{score:0,value:0,suggestions:["Add at least 5 keywords via mata tag"]}}},{title:"Keywords in Text",description:"Text should contain the keywords",weight:2,rateFn:function(a){if(a.meta.keywords){var b=0,c=5,d=0,e=a.meta.keywords.toLowerCase().split(/\s*,\s*/).filter(function(a){return a}),f=a.text.text.toLowerCase(),g=[];for(var h in e){var i=0;f.replace(new RegExp(e[h],"gi"),function(){return i++,d++,""}),b+=Math.min(c,i)/(e.length*c)}return 0===b?g.push("Your text does not cointain any keyword of: "+e.join(", ")):.2>b?g.push("Please improve your keywords rate in your text"):.4>b&&g.push("You can improve your keywords rate in your text"),{score:b,value:d,suggestions:g}}return 0}},{title:"Keywords in Title",description:"Title should contain three keywords",weight:3,rateFn:function(a){if(a.meta.title&&a.meta.keywords){var b=0,c=3,d=0,e=a.meta.keywords.toLowerCase().split(/\s*,\s*/).filter(function(a){return a}),f=a.meta.title,g=[];for(var h in e)f.replace(new RegExp(e[h],"gi"),function(){return d++,""});return b=Math.min(c,d)/c,d||g.push("Add at least one keyword to your title of: "+e.join(", ")),{score:b,value:d,suggestions:g}}return 0}},{title:"Keywords in Description",description:"Description should contain four keywords",weight:1.5,rateFn:function(a){if(a.meta.description&&a.meta.keywords){var b=0,c=3,d=0,e=a.meta.keywords.toLowerCase().split(/\s*,\s*/).filter(function(a){return a}),f=a.meta.description,g=[];for(var h in e)f.replace(new RegExp(e[h],"gi"),function(){return d++,""});return b=Math.min(c,d)/c,(!d||2>d)&&g.push("Add at least two keyword to your title of: "+e.join(", ")),{score:b,value:d,suggestions:g}}return 0}},{title:"Keywords in Headers",description:"Headers should contain keywords",weight:2,rateFn:function(a){if(a.headers.all.length&&a.meta.keywords){var b=0,c=10,d=0,e=a.meta.keywords.toLowerCase().split(/\s*,\s*/).filter(function(a){return a}),f=a.headers.all.map(function(a){return a.text}),g=[];for(var h in e){var i=new RegExp(e[h],"gi");for(var j in f)f[j].replace(i,function(){return d++,""})}return b=Math.min(c,d)/c,d?.3*c>d&&g.push("Your titles could contain more keywords of: "+e.join(", ")):g.push("Your titles do not contain any keywords of: "+e.join(", ")),{score:b,value:d,suggestions:g}}return 0}}];for(var d in c)c[d].group="Keyword",c[d].scope="page";b.exports=c},{}],17:[function(a,b){var c,d=a("./../urlUtils"),e=3,f=6;c=[{title:"External Link Count",description:"Page should have at least "+e+" external links",weight:.3,rateFn:function(a){var b=a.links.externalUrls.length*(1/e),c=.6;return c>b?{score:b,suggestions:["You have only "+b+" external links"]}:b}},{title:"Local Link Count",description:"Page should have at least "+f+" local links",weight:.2,rateFn:function(a){var b=a.links.localUrls.length*(1/f),c=.6;return c>b?{score:b,suggestions:["You have only "+b+" local links"]}:b}},{title:"Invalid local links",description:"Page should have valid local links",weight:2,rateFn:function(a,b){var c,e=a.links.localUrls,f=0,g=b.urls,h=[];for(var i in e){var j=e[i].replace(/#.*/,""),k=d.resolveUrl(a.url,j);g.indexOf(k)<0&&(h.push("Found invalid link to "+j+" ("+k+")"),f++)}return c=1-f/3,f&&h.push("You have "+f+" invalid linux of "+e.length+" local links"),{score:c,value:f,suggestions:h}}},{title:"Invalid references",description:"Page should have valid cross references",weight:1,rateFn:function(a,b){var c,e=[],f=0;c=a.links.all.filter(function(c){return c.href.match(/#\S/)&&d.isLocalUrl(b.address,d.resolveUrl(a.url,c.href))});for(var g in c){var h=d.resolveUrl(a.url,c[g].href).replace(/#.*/,""),i=c[g].href.replace(/.*#/,""),j=!1;for(var k in b.pages)b.pages[k].url===h&&(j=!0,ids=b.pages[k].html.ids||[],ids.indexOf(i)<0&&(e.push("ID reference "+c[g].href+" not found. Possible ids are: "+ids.join(", ")),f++));j||(e.push("Page reference "+c[g].href+" not found"),f++)}return{score:1-f/3,value:f,suggestions:e}}},{title:"Duplicate Link text ratio",description:"Link texts should be different",rateFn:function(a){var b,c=[],d="",e=0,f=[];for(var g in a.links.all)c.push(a.links.all[g].text);c=c.sort();for(var g in c)d===c[g]&&e++,d=c[g];return b=e/c.length,b>.2&&f.push("You have a link duplication text rate of "+b.toFixed(2)),{score:1-b,value:b,suggestions:f}}}];for(var g in c)c[g].group=c[g].group||"Links",c[g].scope="page";b.exports=c},{"./../urlUtils":"gZF72L"}],18:[function(a,b){var c=[{title:"Site Language",description:"Languge should be set in html or meta tag",weight:.2,rateFn:function(a){return a.html.lang&&a.html.lang.length||a.meta.lang&&a.meta.lang.length?1:0}},{title:"Meta description length",description:"Description should be between 70 and 160 chars",weight:1,rateFn:function(a){var b=a.meta.description||"",c=1,d=70,e=160,f=.05,g=[];return b.length<d?c-=(d-b.length)*f:b.length>e&&(c-=(b.length-e)*f),.6>c&&g.push("Improve your description length which is "+b.length),{score:c,value:b.length,suggestions:g}}},{title:"Meta title length",description:"Title should be between 10 and 70 chars",weight:1,rateFn:function(a){var b=a.meta.title||"",c=1,d=10,e=70,f=.1,g=[];return b.length<d?c-=(d-b.length)*f:b.length>e&&(c-=(b.length-e)*f),.7>c&&g.push("Improve your title length which is "+b.length),{score:c,value:b.length,suggestions:g}}}];for(var d in c)c[d].group="Meta",c[d].scope="page";b.exports=c},{}],urlUtils:[function(a,b){b.exports=a("gZF72L")},{}],gZF72L:[function(a,b){var c=a("url"),d={};d.resolveUrl=function(a,b){var d=c.parse(b),e=b;return d.host&&c.parse(a).host!==d.host||(e=c.resolve(a,b)),e},d.host=function(a){var b=c.parse(a);return b.host},d.isLocalUrl=function(a,b){var c=d.host(a),e=d.resolveUrl(a,b);return e.indexOf(c)>=0},d.isSelfLink=function(a){return 0===a.indexOf("#")},d.categorizeLinks=function(a){if(a.links&&a.links.all){a.links.selfUrls=[],a.links.localUrls=[],a.links.externalUrls=[];for(var b in a.links.all){var c=a.links.all[b].href;d.isSelfLink(c)?a.links.selfUrls.push(c):d.isLocalUrl(a.url,c)?a.links.localUrls.push(c):a.links.externalUrls.push(c)}}return a},d.getProtocol=function(a,b){var e=d.resolveUrl(a,b),f=c.parse(e),g=f.protocol.replace(/:$/,"");return g},d.isHttpProtocol=function(a,b){var c=d.getProtocol(a,b);return"http"===c||"https"===c},d.isTextUrl=function(a){return a.replace(/#.*$/,"").match(/\.(html?|txt|php)$/i)},d.slug=function(a){return a.replace(/\.\w{3,4}/,"").replace(/[^A-Za-z0-9]/g,"-").toLowerCase()},d.relative=function(a,b){return a=a.replace(/\/$/,""),0===b.indexOf(a)?b.substr(a.length):b},d.base=function(a){var b=c.parse(a);return c.format({protocol:b.protocol,auth:b.auth,host:b.host})},b.exports=d},{url:25}],21:[function(a,b,c){var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};!function(a){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function g(a,b){return f(a.split(G),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c,r="object"==typeof b&&b&&b.exports==q&&b,s="object"==typeof d&&d;(s.global===s||s.window===s)&&(a=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^ -~]/,G=/\x2E|\u3002|\uFF0E|\uFF61/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.2.3",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return t});else if(q&&!q.nodeType)if(r)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else a.punycode=t}(this)},{}],22:[function(a,b){"use strict";function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,e,f){b=b||"&",e=e||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(e);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),c(g,n)?d(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],23:[function(a,b){"use strict";function c(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,g,h){return b=b||"&",g=g||"=",null===a&&(a=void 0),"object"==typeof a?c(f(a),function(c){var f=encodeURIComponent(d(c))+g;return e(a[c])?a[c].map(function(a){return f+encodeURIComponent(d(a))}).join(b):f+encodeURIComponent(d(a[c]))}).join(b):h?encodeURIComponent(d(h))+g+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],24:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":22,"./encode":23}],25:[function(a,b,c){!function(){"use strict";function b(a,b,c){if(a&&"object"==typeof a&&a.href)return a;if("string"!=typeof a)throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var e={},f=a;f=f.trim();var j=i.exec(f);if(j){j=j[0];var k=j.toLowerCase();e.protocol=k,f=f.substr(j.length)}if(c||j||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===f.substr(0,2);!l||j&&t[j]||(f=f.substr(2),e.slashes=!0)}if(!t[j]&&(l||j&&!u[j])){var w=f.indexOf("@");if(-1!==w){for(var x=f.slice(0,w),y=!0,z=0,A=o.length;A>z;z++)if(-1!==x.indexOf(o[z])){y=!1;break}y&&(e.auth=decodeURIComponent(x),f=f.substr(w+1))}for(var B=-1,z=0,A=n.length;A>z;z++){var C=f.indexOf(n[z]);-1!==C&&(0>B||B>C)&&(B=C)}-1!==B?(e.host=f.substr(0,B),f=f.substr(B)):(e.host=f,f="");for(var D=g(e.host),E=Object.keys(D),z=0,A=E.length;A>z;z++){var F=E[z];e[F]=D[F]}e.hostname=e.hostname||"";var G="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(e.hostname.length>p)e.hostname="";else if(!G)for(var H=e.hostname.split(/\./),z=0,A=H.length;A>z;z++){var I=H[z];if(I&&!I.match(q)){for(var J="",K=0,L=I.length;L>K;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(q)){var M=H.slice(0,z),N=H.slice(z+1),O=I.match(r);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(f="/"+N.join(".")+f),e.hostname=M.join(".");break}}}if(e.hostname=e.hostname.toLowerCase(),!G){for(var P=e.hostname.split("."),Q=[],z=0;z<P.length;++z){var R=P[z];Q.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(R):R)}e.hostname=Q.join(".")}e.host=(e.hostname||"")+(e.port?":"+e.port:""),e.href+=e.host,G&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!s[k])for(var z=0,A=m.length;A>z;z++){var S=m[z],T=encodeURIComponent(S);T===S&&(T=escape(S)),f=f.split(S).join(T)}var U=f.indexOf("#");-1!==U&&(e.hash=f.substr(U),f=f.slice(0,U));var V=f.indexOf("?");return-1!==V?(e.search=f.substr(V),e.query=f.substr(V+1),b&&(e.query=v.parse(e.query)),f=f.slice(0,V)):b&&(e.search="",e.query={}),f&&(e.pathname=f),u[j]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=d(e),e}function d(a){"string"==typeof a&&(a=b(a));var c=a.auth||"";c&&(c=encodeURIComponent(c),c=c.replace(/%3A/i,":"),c+="@");var d=a.protocol||"",e=a.pathname||"",f=a.hash||"",g=!1,h="";void 0!==a.host?g=c+a.host:void 0!==a.hostname&&(g=c+(-1===a.hostname.indexOf(":")?a.hostname:"["+a.hostname+"]"),a.port&&(g+=":"+a.port)),a.query&&"object"==typeof a.query&&Object.keys(a.query).length&&(h=v.stringify(a.query));var i=a.search||h&&"?"+h||"";return d&&":"!==d.substr(-1)&&(d+=":"),a.slashes||(!d||u[d])&&g!==!1?(g="//"+(g||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):g||(g=""),f&&"#"!==f.charAt(0)&&(f="#"+f),i&&"?"!==i.charAt(0)&&(i="?"+i),d+g+e+i+f}function e(a,b){return d(f(a,b))}function f(a,c){if(!a)return c;if(a=b(d(a),!1,!0),c=b(d(c),!1,!0),a.hash=c.hash,""===c.href)return a.href=d(a),a;if(c.slashes&&!c.protocol)return c.protocol=a.protocol,u[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=d(c),c;if(c.protocol&&c.protocol!==a.protocol){if(!u[c.protocol])return c.href=d(c),c;if(a.protocol=c.protocol,!c.host&&!t[c.protocol]){for(var e=(c.pathname||"").split("/");e.length&&!(c.host=e.shift()););c.host||(c.host=""),c.hostname||(c.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}return a.pathname=c.pathname,a.search=c.search,a.query=c.query,a.host=c.host||"",a.auth=c.auth,a.hostname=c.hostname||c.host,a.port=c.port,(void 0!==a.pathname||void 0!==a.search)&&(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.slashes=a.slashes||c.slashes,a.href=d(a),a}var f=a.pathname&&"/"===a.pathname.charAt(0),g=void 0!==c.host||c.pathname&&"/"===c.pathname.charAt(0),h=g||f||a.host&&c.pathname,i=h,j=a.pathname&&a.pathname.split("/")||[],e=c.pathname&&c.pathname.split("/")||[],k=a.protocol&&!u[a.protocol];if(k&&(delete a.hostname,delete a.port,a.host&&(""===j[0]?j[0]=a.host:j.unshift(a.host)),delete a.host,c.protocol&&(delete c.hostname,delete c.port,c.host&&(""===e[0]?e[0]=c.host:e.unshift(c.host)),delete c.host),h=h&&(""===e[0]||""===j[0])),g)a.host=c.host||""===c.host?c.host:a.host,a.hostname=c.hostname||""===c.hostname?c.hostname:a.hostname,a.search=c.search,a.query=c.query,j=e;else if(e.length)j||(j=[]),j.pop(),j=j.concat(e),a.search=c.search,a.query=c.query;else if("search"in c){if(k){a.hostname=a.host=j.shift();var l=a.host&&a.host.indexOf("@")>0?a.host.split("@"):!1;l&&(a.auth=l.shift(),a.host=a.hostname=l.shift())}return a.search=c.search,a.query=c.query,(void 0!==a.pathname||void 0!==a.search)&&(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=d(a),a}if(!j.length)return delete a.pathname,a.search?delete a.path:a.path="/"+a.search,a.href=d(a),a;for(var m=j.slice(-1)[0],n=(a.host||c.host)&&("."===m||".."===m)||""===m,o=0,p=j.length;p>=0;p--)m=j[p],"."==m?j.splice(p,1):".."===m?(j.splice(p,1),o++):o&&(j.splice(p,1),o--);if(!h&&!i)for(;o--;o)j.unshift("..");!h||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),n&&"/"!==j.join("/").substr(-1)&&j.push("");
var q=""===j[0]||j[0]&&"/"===j[0].charAt(0);if(k){a.hostname=a.host=q?"":j.length?j.shift():"";var l=a.host&&a.host.indexOf("@")>0?a.host.split("@"):!1;l&&(a.auth=l.shift(),a.host=a.hostname=l.shift())}return h=h||a.host&&j.length,h&&!q&&j.unshift(""),a.pathname=j.join("/"),(void 0!==a.pathname||void 0!==a.search)&&(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=c.auth||a.auth,a.slashes=a.slashes||c.slashes,a.href=d(a),a}function g(a){var b={},c=j.exec(a);return c&&(c=c[0],":"!==c&&(b.port=c.substr(1)),a=a.substr(0,a.length-c.length)),a&&(b.hostname=a),b}var h=a("punycode");c.parse=b,c.resolve=e,c.resolveObject=f,c.format=d;var i=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,k=["<",">",'"',"`"," ","\r","\n","	"],l=["{","}","|","\\","^","~","`"].concat(k),m=["'"].concat(k),n=["%","/","?",";","#"].concat(l).concat(m),o=["/","@","?","#"].concat(k),p=255,q=/^[a-zA-Z0-9][a-z0-9A-Z_-]{0,62}$/,r=/^([a-zA-Z0-9][a-z0-9A-Z_-]{0,62})(.*)$/,s={javascript:!0,"javascript:":!0},t={javascript:!0,"javascript:":!0},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=a("querystring")}()},{punycode:21,querystring:24}]},{},["7Puv7F","gZF72L","SkZC52","c1XhJL"]),angular.module("d3",[]).factory("d3Service",["$window",function(a){var b=a.d3||{};return{d3:b}}]),angular.module("seoApp",["ngRoute","d3"]).config(["$routeProvider",function(a){a.when("/pages/:pageId",{templateUrl:"partials/page.html",controller:"PageCtrl"}).when("/pages",{templateUrl:"partials/pageList.html",controller:"PageListCtrl"}).when("/ratings/:ratingSlug",{templateUrl:"partials/rating.html",controller:"RatingCtrl"}).when("/ratings",{templateUrl:"partials/ratingList.html",controller:"RatingListCtrl"}).when("/properties/:propertySlug",{templateUrl:"partials/property.html",controller:"PropertyCtrl"}).when("/properties",{templateUrl:"partials/propertyList.html",controller:"PropertyListCtrl"}).when("/search",{templateUrl:"partials/search.html",controller:"SearchCtrl"}).when("/home",{templateUrl:"partials/home.html",controller:"HomeCtrl"}).otherwise({redirectTo:"/home"})}]),angular.module("seoApp").factory("SiteService",["$http",function(a){var b,c={},d=require("urlUtils"),e={};return b=function(){a.get("seo-data.json").success(function(a){var b=a.address,c=a.pages||[],f=[];for(var g in c){var h=c[g];"success"===h.status&&(f.push(h.url),h.name=d.relative(b,h.url),h.id=d.slug(h.name))}e={address:b,urls:f,pages:c}})},c.getSite=function(){return e},c.getPages=function(){return e.pages||[]},c.getPageById=function(a){var b=c.getPages();for(var d in b)if(b[d].id===a)return b[d]},b(),c}]),angular.module("seoApp").factory("RatingService",[function(){var a={},b=require("ratings"),c=b.getRatings(),d=require("urlUtils").slug,e=[];for(var f in c)e.push(c[f].title);return a.isRatingFunction=function(a){return e.indexOf(a)>=0},a.getRatingBySlug=function(a){for(var b in c)if(d(c[b].title)===a)return c[b];return null},a.getAllPageRatings=function(a,b){var d=[];for(var e in c){var f={title:c[e].title,description:c[e].description,score:0,weightedScore:0,weight:c[e].weight,pages:0};for(var g in b){var h=c[e].rateFn(b[g],a);f.pages++,f.score+=h.score,f.weightedScore+=f.score*f.weight}f.score=f.score/b.length,d.push(f)}return d},a.getAllRatingsPerPage=function(a,b){var d=[];for(var e in b){var f={name:b[e].name,id:b[e].id,score:0,weightedScore:0,weight:0,ratings:0};for(var g in c){var h=c[g].rateFn(b[e],a);f.ratings++,f.score+=h.score,f.weightedScore+=h.score*c[g].weight,f.weight+=c[g].weight}f.score=f.score/c.length,f.weightedScore=f.weightedScore/f.weight,d.push(f)}return d},a.getScoresPerPage=function(a,b){var d=[];b=b.sort(function(a,b){return a=a.name.toLowerCase(),b=b.name.toLowerCase(),b>a?-1:a>b?1:0});for(var e in b){var f=[];for(var g in c)f.push({score:c[g].rateFn(b[e],a),rating:c[g]});d.push({page:b[e],scores:f})}return d},a}]),angular.module("seoApp").factory("StateService",[function(){return{showRating:{},showProperty:{H1:!0,Description:!0,Title:!0,Keywords:!0}}}]),angular.module("seoApp").factory("PropertyService",[function(){var a={},b=require("properties"),c=b.getProperties(),d=require("urlUtils").slug,e=[];for(var f in c)e.push(c[f].title);return a.getPropertyNames=function(){return e},a.isPropertyFunction=function(a){return e.indexOf(a)>=0},a.getPropertyBySlug=function(a){for(var b in c)if(d(c[b].title)===a)return c[b];return null},a.getAllPageProperties=function(){var a=[];for(var b in c){var d={title:c[b].title,description:c[b].description};a.push(d)}return a},a.getAllPropertiesForPage=function(a,b){var d=[];for(var e in c){var f=c[e].fn(b,a);d.push({title:c[e].title,value:f})}return d},a}]),angular.module("seoApp").factory("SearchService",["SiteService",function(a){var b={},c={pages:[],matchCount:0},d=function(a,b,c,d){c=c||4,d=d||4;for(var e=0,f=b,g=b,h=a.length;f>=0&&c>e;)" "===a.charAt(f--)&&e++;for(f++,e=0;h>g&&d>e;)" "===a.charAt(g++)&&e++;return g--,a.substr(f,g-f)},e=function(a,b){var c,e=a.toLowerCase(),f=0,g=b.length,h=[];for(b=b.toLowerCase(),c=e.indexOf(b);c>=0;)f+=c+g,h.push(d(a,f-g)),c=e.substr(f).indexOf(b);return h};return b.getEmptyResult=function(){return c},b.search=function(b){for(var c=a.getPages(),d={pages:[],matchCount:0},f=0,g=c.length;g>f;f++){var h=c[f],i=h.text.text,j=e(i,b);j.length&&(d.pages.push({page:h,matches:j}),d.matchCount+=j.length)}return d},b}]),angular.module("seoApp").controller("HomeCtrl",["$scope","SiteService","RatingService",function(a,b,c){a.pageScores=[],a.$watch(b.getSite,function(a,b,c){!a||a===b&&0!==c.pageScores.length||c.update()}),a.update=function(){var d=b.getSite();a.pageScores=c.getScoresPerPage(d,d.pages)},a.hover=function(a,b){console.log(a,b)}}]),angular.module("seoApp").controller("PageListCtrl",["$scope","SiteService","RatingService",function(a,b,c){a.ratingsPerPage=[],a.predicate="name",a.reverse=!1,a.$watch(b.getSite,function(a,d,e){!a||a===d&&e.ratingsPerPage.length||(e.ratingsPerPage=c.getAllRatingsPerPage(a,b.getPages()))})}]),angular.module("seoApp").controller("PageCtrl",["$scope","$routeParams","SiteService","RatingService","PropertyService","StateService",function(a,b,c,d,e,f){var g=require("ratings"),h=require("urlUtils").slug;a.id=null,a.site=null,a.page=null,a.summary=[],a.showRating=f.showRating,a.showProperty=f.showProperty,a.propertyNames=e.getPropertyNames(),a.groupRatings=[],a.$watch(c.getSite,function(a,b,c){a&&a!==b&&c.update()}),a.$watch(function(){return b.pageId},function(a,b,c){a&&c.id!==a&&c.update()}),a.slug=h,a.groups=g.getGroups(),a.update=function(){a.id=b.pageId,a.site=c.getSite(),a.page=c.getPageById(a.id),a.site&&a.page&&a.updatePage()},a.updatePage=function(){a.summary=e.getAllPropertiesForPage(a.site,a.page),a.groupRatings=[],a.totalWeight=0;for(var b in a.groups){var c=a.groups[b],d=a.getRatingsByGroup(c),f=0,g=0,h=0;for(var i in d)f+=d[i].score,h+=d[i].score*d[i].weight,g+=d[i].weight;a.groupRatings.push({name:a.groups[b],ratings:d,score:f/d.length,weightedScore:h,weight:g}),a.totalWeight+=g}},a.getRatingsByGroup=function(b){var c=g.getRatingsByGroup(b),d=[];for(var e in c){var f,h=c[e];f=h.rateFn(a.page,a.site),f.title=h.title,f.description=h.description,f.weight=h.weight,d.push(f)}return d}}]),angular.module("seoApp").controller("RatingListCtrl",["$scope","SiteService","RatingService",function(a,b,c){var d=require("urlUtils");a.allPageRatings=[],a.slug=d.slug,a.totalWeight=0,a.predicate="title",a.reverse=!1,a.$watch(b.getSite,function(a,d,e){if(a&&(a!==d||!e.allPageRatings.length)){e.allPageRatings=c.getAllPageRatings(a,b.getPages()),e.totalWeight=0;for(var f=e.allPageRatings.length-1;f>=0;f--)e.totalWeight+=e.allPageRatings[f].weight}})}]),angular.module("seoApp").controller("RatingCtrl",["$scope","$routeParams","SiteService","RatingService",function(a,b,c,d){require("ratings"),require("urlUtils");a.pageRatings=[],a.rating=d.getRatingBySlug(b.ratingSlug),a.$watch(function(){return b.ratingSlug},function(a,b,c){a&&0===c.pageRatings.length&&c.update()}),a.$watch(c.getSite,function(a,b,c){a&&a!==b&&c.update()}),a.update=function(){var b=c.getSite(),d=c.getPages(),e=[];for(var f in d){var g=a.rating.rateFn(d[f],b);e.push({page:d[f],rating:g})}a.pageRatings=e}}]),angular.module("seoApp").controller("PropertyListCtrl",["$scope","$routeParams","SiteService","PropertyService",function(a,b,c,d){var e=require("urlUtils");a.allPageProperties=[],a.slug=e.slug,a.predicate="title",a.reverse=!1,a.$watch(c.getSite,function(a,b,e){!a||a===b&&e.allPageProperties.length||(e.allPageProperties=d.getAllPageProperties(a,c.getPages()))})}]),angular.module("seoApp").controller("PropertyCtrl",["$scope","$routeParams","SiteService","PropertyService",function(a,b,c,d){require("ratings"),require("urlUtils");a.pageProperties=[],a.property=d.getPropertyBySlug(b.propertySlug),a.$watch(function(){return b.propertySlug},function(a,b,c){a&&0===c.pageProperties.length&&c.update()}),a.$watch(c.getSite,function(a,b,c){a&&a!==b&&c.update()}),a.update=function(){var b=c.getSite(),d=c.getPages(),e=[];for(var f in d){var g=a.property.fn(d[f],b);e.push({page:d[f],property:{value:g}})}a.pageProperties=e}}]),angular.module("seoApp").controller("SearchCtrl",["$scope","$routeParams","SearchService",function(a,b,c){a.term="",a.matches=c.getEmptyResult(),a.predicate="matches.length",a.reverse=!0,a.$watch("term",function(b,d){a.matches=b&&b!==d&&b.length>2?c.search(b):c.getEmptyResult()})}]),angular.module("seoApp").filter("numericOrderBy",["$parse",function(a){return function(b,c,d){if(!angular.isArray(b))return b;if(!c)return b;for(var e=[],f=a(c),g=0,h=b.length;h>g;g++)e.push(b[g]);return e.sort(function(a,b){var c=a,e=b,g=f(a),h=f(b),i=0;return g&&h&&(g.match(/^\d+(\.\d+)?$/)&&h.match(/^\d+(\.\d+)?$/)?(c=parseFloat(g),e=parseFloat(h)):(c=g,e=h)),e>c?i=-1:c>e&&(i=1),d&&(i=-1*i),i})}}]),angular.module("seoApp").directive("progressbar",function(){return{restrict:"E",scope:{progress:"="},template:'<div class="progress">  <div class="progress-bar" role="progressbar" aria-valuenow="{{percent}}" aria-valuemin="0" aria-valuemax="100">    <span class="progress-text">{{percent | number:1 }}%</span>  </div></div>',link:function(a,b){a.percent=0,a.$watch("progress",function(c){a.percent=100*c;var d,e=b.children().children();d=a.percent<33?"progress-bar-danger":a.percent<66?"progress-bar-warning":"progress-bar-success",e.css("width",a.percent.toFixed(2)+"%").addClass(d)})}}}),angular.module("seoApp").directive("squareLine",["$window","d3Service","SiteService","RatingService",function(a,b){return{restrict:"EAC",scope:{scores:"="},link:function(c,d,e){var f=b.d3,g=f.select(d[0]).append("svg"),h=parseInt(e.size)||20,i=parseInt(e.sizePadding)||4;a.onresize=function(){c.$apply()},c.data=!1,c.$watch(function(){return c.scores},function(){c.render()}),c.$watch(function(){return angular.element(a)[0].innerWidth},function(){c.render()}),c.render=function(){var a=c.scores;if(g.selectAll("*").remove(),a&&a.length){var b=a.length*(h+i)+i,e=h+2*i,j=f.sum(a,function(a){return a.rating.weight});rScale=f.scale.linear().domain([f.min(a,function(a){return a.rating.weight}),f.max(a,function(a){return a.rating.weight})]).range([4,h]),g.attr("height",e).attr("width",b);var k=g.append("g").attr("class","scores"),l=k.selectAll("rect").data(a).enter().append("rect");l.attr("x",function(b,c){return(c+1)*(h+i)-rScale(a[c].rating.weight)/2-h/2}).attr("y",function(b,c){return h+i-rScale(a[c].rating.weight)/2-h/2}).attr("width",function(b,c){return rScale(a[c].rating.weight)}).attr("height",function(b,c){return rScale(a[c].rating.weight)}).style("fill",function(a){var b=(120*a.score.score).toFixed(0),c=100,d=(25*(1-a.score.score)+25).toFixed(0);return f.rgb("hsl("+b+","+c+"%,"+d+"%)")}).on("mouseover",function(a){var b=(100*a.rating.weight/j).toFixed(2),c="Rating: "+a.rating.title+", Score: "+a.score.score.toFixed(2)+" ("+b+"% weight)";d[0].setAttribute("title",c)})}}}}}]),angular.module("seoApp").run(["$templateCache",function(a){"use strict";a.put("partials/home.html",'<div class=col-md-12><h1>Overview</h1><div class=row ng-repeat="pageScore in pageScores"><div class=col-md-12><span scores=pageScore.scores class=squareLine></span> <a href=#/pages/{{pageScore.page.id}}>{{pageScore.page.name}}</a></div></div></div>'),a.put("partials/page.html",'<div class=col-md-12><h1>{{page.name}}</h1><p>Visit Site: <a ng-href={{page.url}}>{{page.url}}</a></p><h2>Properties</h2><p>Choose properties to show:</p><p><span ng-repeat="name in propertyNames"><a class="btn btn-default btn-xs" ng-show=!showProperty[name] ng-click="showProperty[name] = !showProperty[name]">{{name}}</a></span></p><div class="row row-rating"><div class=col-sm-3><a ng-click="predicate = \'title\';reverse = !reverse">Name</a></div><div class=col-sm-9><a ng-click="predicate = \'value\';reverse = !reverse">Value</a></div></div><div class="row row-rating" ng-show=showProperty[s.title] ng-repeat="s in summary | orderBy:predicate:reverse"><div class=col-sm-3><a href=#/properties/{{slug(s.title)}}>{{s.title}}</a> <a class="glyphicon glyphicon-remove btn-close" ng-click="showProperty[s.title] = !showProperty[s.title]" title="Hide {{s.title}}"></a></div><div class=col-sm-9>{{s.value}}</div></div><h2>Ratings</h2><div class=row><div class=col-sm-7>Name</div><div class=col-sm-2>Value</div><div class=col-sm-2>Score</div><div class=col-sm-1>Weight</div></div><div ng-repeat="group in groupRatings"><div class="row row-rating"><div class=col-sm-7><b>{{group.name}}</b> <a data-ng-click="showRating[group.name] = !showRating[group.name]"><span ng-show=!showRating[group.name]>Show More</span><span ng-show=showRating[group.name]>Show Less</span></a></div><div class=col-sm-2></div><div class=col-sm-2><progressbar progress=group.score></progressbar></div><div class=col-sm-1><span class=badge>{{(group.weight / totalWeight)*100 | number:1}}%</span></div></div><div ng-show=showRating[group.name] class=row><div class=col-sm-7><a ng-click="predicate2 = \'title\'; reverse2 = !reverse2">Name</a></div><div class=col-sm-2><a ng-click="predicate2 = \'value\'; reverse2 = !reverse2">Value</a></div><div class=col-sm-2><a ng-click="predicate2 = \'score\'; reverse2 = !reverse2">Score</a></div><div class=col-sm-1><a ng-click="predicate2 = \'weightedScore\'; reverse2 = !reverse2">Weight</a></div></div><div ng-show=showRating[group.name] class="row row-rating" data-ng-repeat="rating in group.ratings | orderBy:predicate2:reverse2"><div class=col-sm-7><a href=#/ratings/{{slug(rating.title)}}>{{rating.title}}</a></div><div class=col-sm-2>{{rating.value}}</div><div class=col-sm-2><progressbar progress=rating.score></progressbar></div><div class=col-sm-1><span class=badge>{{(rating.weight / totalWeight)*100 | number:1}}%</span></div><div class=col-sm-12>{{rating.suggestions.join(\', \')}}</div></div></div></div>'),a.put("partials/pageList.html",'<div class=col-md-12><h1>Page Overview</h1><p><input class=form-control placeholder="Page Filter" ng-model=filter></p><div class=row><div class=col-sm-10><a ng-click="predicate = \'name\'; reverse = !reverse">Name</a></div><div class=col-sm-2><a ng-click="predicate = \'weightedScore\'; reverse = !reverse">Score</a></div></div><div class="row row-rating" ng-repeat="page in ratingsPerPage | filter:filter | orderBy:predicate:reverse"><div class=col-sm-10><a href=#/pages/{{page.id}}>{{page.name}}</a></div><div class=col-sm-2><progressbar progress=page.weightedScore></div></div></div>'),a.put("partials/property.html",'<div class=col-md-12><h1>{{property.title}}</h1><p>{{property.description}}</p><table class=table><thead><tr><th><a ng-click="predicate = \'page.name\'; reverse = !reverse">Name</a></th><th><a ng-click="predicate = \'property.value\'; reverse = !reverse">Value</a></th></tr></thead><tbody><tr ng-repeat="pageProperty in pageProperties | filter:filter | numericOrderBy:predicate:reverse"><td><a href=#/pages/{{pageProperty.page.id}}>{{pageProperty.page.name}}</a></td><td>{{pageProperty.property.value}}</td></tr></tbody></table></div>'),a.put("partials/propertyList.html",'<div class=col-md-12><h1>Property Overview</h1><p><input class=form-control placeholder="Property Filter" ng-model=filter></p><div class=row><div class=col-sm-4><a ng-click="predicate = \'title\'; reverse = !reverse">Name</a></div><div class=col-sm-8><a ng-click="predicate = \'description\'; reverse = !reverse">Description</a></div></div><div class="row row-rating" ng-repeat="property in allPageProperties | filter:filter | numericOrderBy:predicate:reverse"><div class=col-sm-4><a href=#/properties/{{slug(property.title)}}>{{property.title}}</a></div><div class=col-sm-8>{{property.description}}</div></div></div>'),a.put("partials/rating.html",'<div class=col-md-12><h1>{{rating.title}}</h1><p>{{rating.description}}</p><p>Weight: {{rating.weight}}</p><div class=row><div class=col-sm-7><a ng-click="predicate = \'page.name\'; reverse = !reverse">Name</a></div><div class=col-sm-2><a ng-click="predicate = \'rating.value\'; reverse = !reverse">Value</a></div><div class=col-sm-3><a ng-click="predicate = \'rating.score\'; reverse = !reverse">Score</a></div></div><div class="row row-rating" data-ng-repeat="pageRating in pageRatings | orderBy:predicate:reverse"><div class=col-sm-7><a href=#/pages/{{pageRating.page.id}}>{{pageRating.page.name}}</a></div><div class=col-sm-2>{{pageRating.rating.value}}</div><div class=col-sm-3><progressbar progress=pageRating.rating.score></progressbar></div><div class=col-sm-12>{{pageRating.rating.suggestions.join(\', \')}}</div></div></div>'),a.put("partials/ratingList.html",'<div class=col-md-12><h1>Rating Overview</h1><p><input class=form-control placeholder="Rating Filter" ng-model=filter></p><div class=row><div class=col-sm-4><a ng-click="predicate = \'title\'; reverse = !reverse">Name</a></div><div class=col-sm-5>Description</div><div class=col-sm-2><a ng-click="predicate = \'score\'; reverse = !reverse">Score</a></div><div class=col-sm-1><a ng-click="predicate = \'weight\'; reverse = !reverse">Weight</a></div></div><div class="row row-rating" ng-repeat="rating in allPageRatings | filter:filter | orderBy:predicate:reverse"><div class=col-sm-4><a href=#/ratings/{{slug(rating.title)}}>{{rating.title}}</a></div><div class=col-sm-5>{{rating.description}}</div><div class=col-sm-2><progressbar progress=rating.score></div><div class=col-sm-1><span class=badge>{{(rating.weight / totalWeight)*100 | number:1}}%</span></div></div></div>'),a.put("partials/search.html",'<div class=col-md-12><h1>Text Search</h1><p>Search text in all pages.</p><p><input class=form-control placeholder="Enter Search Text" ng-model=term></p><p ng-show=matches.matchCount>Found {{matches.matchCount}} matches in {{matches.pages.length}} pages</p><div class="row row-rating"><div class=col-sm-4><a ng-click="predicate = \'page.name\'; reverse = !reverse">Page URL</a></div><div class=col-sm-8><a ng-click="predicate = \'matches.length\'; reverse = !reverse">Matches</a></div></div><div class="row row-rating" ng-repeat="match in matches.pages | orderBy:predicate:reverse"><div class=col-sm-4><a href=#/pages/{{match.page.id}}>{{match.page.name}}</a></div><div class=col-sm-8>{{ match.matches.length }} matches: {{ match.matches.join(\', \') }}</div></div></div>')}]);